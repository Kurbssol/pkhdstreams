<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>My Custom Schedule</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="styles.css" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width,initial-scale=1">
</head>

<body>
    <!-- Navbar -->
    <header class="header">
      <nav class="navbar navbar-expand-lg fixed-top py-3">
        <div class="container">
          <a href="index.html" class="navbar-brand text-uppercase font-weight-bold">My Streams</a>
          <button type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right">
            <i class="fa fa-bars"></i>
          </button>
          <div id="navbarNav" class="collapse navbar-collapse">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a href="index.html" class="nav-link">Home</a>
              </li>
              <li class="nav-item">
                <a href="schedule.html" class="nav-link">Schedule</a>
              </li>
              <li class="nav-item">
                <a href="about.html" class="nav-link">About</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Main Content -->
    <div class="container" style="margin-top: 80px;">
        <h1 class="text-center">Event Schedule</h1>
        <div id="clock" class="text-center mb-4">Server Date and Time: </div>
        <div id="schedule" class="table-responsive">
           <table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">Event</th>
      <th scope="col">Day</th>
      <th scope="col">Time (ET)</th>
    </tr>
  </thead>
  <tbody>
    <!-- WWE/AEW Weekly Shows -->
    <tr>
      <td>Monday Night Raw</td>
      <td>Monday</td>
      <td>8:00 PM</td>
    </tr>
    <tr>
      <td>WWE NXT</td>
      <td>Tuesday</td>
      <td>8:00 PM</td>
    </tr>
    <tr>
      <td>AEW Dynamite</td>
      <td>Wednesday</td>
      <td>8:00 PM</td>
    </tr>
    <tr>
      <td>Friday Night Smackdown</td>
      <td>Friday</td>
      <td>8:00 PM</td>
    </tr>
    <tr>
      <td>AEW Collision</td>
      <td>Saturday</td>
      <td>8:00 PM</td>
    </tr>

    <!-- NASCAR Weekly Races (Auto-pulled data) -->
    <tr id="nascar-event">
      <td>NASCAR Weekly Race</td>
      <td id="nascar-day">Loading...</td>
      <td id="nascar-time">Loading...</td>
    </tr>
  </tbody>
</table>

<script>
  async function fetchNascarRace() {
    try {
      const response = await fetch('https://api.nascar.com/v1/races'); // Update this URL with the actual NASCAR API endpoint
      const raceData = await response.json();
      
      // Extract necessary data from raceData (e.g., next race)
      const nextRace = raceData[0]; // This depends on the API response structure

      // Update the NASCAR row in the schedule
      document.getElementById('nascar-day').innerText = nextRace.day;  // Use the correct key
      document.getElementById('nascar-time').innerText = nextRace.time;  // Use the correct key
    } catch (error) {
      console.error('Error fetching NASCAR race data:', error);
    }
  }

  // Fetch NASCAR race data on page load
  window.onload = fetchNascarRace;
</script>

    <!-- Footer -->
    <footer class="footer text-center">
        <p>Made with ❤️ by Me</p>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>

    <script>
        // Function to get server time
        async function getTime() {
            try {
                const response = await fetch("https://worldtimeapi.org/api/timezone/America/New_York");
                const data = await response.json();
                const formattedDate = new Date(data.datetime).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                const formattedTime = new Date(data.datetime).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                document.getElementById('clock').textContent = `Server Date and Time: ${formattedDate} ${formattedTime} ET`;
            } catch (error) {
                console.error("Error fetching time:", error);
            }
        }

        // Call getTime initially and refresh every minute
        getTime();
        setInterval(getTime, 60000); // Update time every 1 minute

        // Function to load schedule
        function loadSchedule() {
            const scheduleData = [
                { date: "Sep 16, 2024", time: "10:00 PM", event: "Event 1", link: "#" },
                { date: "Sep 17, 2024", time: "11:00 AM", event: "Event 2", link: "#" },
                { date: "Sep 18, 2024", time: "2:00 PM", event: "Event 3", link: "#" }
            ];

            const scheduleBody = document.getElementById('scheduleBody');
            scheduleBody.innerHTML = ''; // Clear previous content

            scheduleData.forEach(item => {
                const row = `<tr>
                    <td>${item.date} ${item.time} ET</td>
                    <td>${item.event}</td>
                    <td><a href="${item.link}">Watch</a></td>
                </tr>`;
                scheduleBody.innerHTML += row;
            });
        }

        // Load schedule on page load
        document.addEventListener('DOMContentLoaded', loadSchedule);
    </script>
</body>
</html>
