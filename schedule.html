<!DOCTYPE HTML>
<html lang="en">

<head>
    <title>DD12 - Schedule</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="styles.css" rel="stylesheet" type="text/css">
    <link href="dono-popup.css" rel="stylesheet" type="text/css">
    <link rel="apple-touch-icon" sizes="180x180" href="fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="fav/favicon-16x16.png">
    <link rel="manifest" href="fav/site.webmanifest">
    <meta name="description" content="A light-weight streaming website that's easy to use. No ads, no bull. Come check us out!">
    <meta content="DD12Streams" property="twitter:title">
    <meta content="A pretty cool live streaming website." property="twitter:description">
    <meta content="https://dd12streams.com/fav/dd12.png" property="twitter:image">
    <meta property="og:type" content="website">
    <meta content="summary_large_image" name="twitter:card">
    <meta name="twitter:domain" content="dd12streams.com">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="stream-status.js"></script>
    <script src="viewer-count.js"></script>
    <script src="dono-popup.js"></script>
    <script src="convertTime.js"></script>
    <script defer="defer" src="https://translate.google.com/translate_a/elementa0d8.js?cb=googleTranslateElementInit"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8Y0CPRKT4E"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-8Y0CPRKT4E');
    </script>
    <style>
        .online { color: green; }
        .offline { color: red; }
        .event-time { font-weight: bold; }
        .schedule-table { width: 100%; text-align: center; }
        .schedule-table th, .schedule-table td { padding: 10px; }
    </style>
</head>

<body>
    <header class="header">
        <nav style="max-width: 1050px;" class="navbar navbar-expand-lg fixed-top py-3">
            <div class="container">
                <a href="index.html" class="navbar-brand text-uppercase font-weight-bold pride" id="dd12">DD12</a>
                <button type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right">
                    <i class="fa fa-bars"></i>
                </button>
                <div id="navbarSupportedContent" class="collapse navbar-collapse">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link text-uppercase font-weight-bold">Home</a>
                        </li>
                        <li class="nav-item">
                            <a href="about.html" class="nav-link text-uppercase font-weight-bold">About</a>
                        </li>
                        <li class="nav-item">
                            <a href="donate.html" class="nav-link text-uppercase font-weight-bold">Donate</a>
                        </li>
                        <li class="nav-item">
                            <a href="https://twitter.com/dd12streams" class="nav-link text-uppercase font-weight-bold">Twitter</a>
                        </li>
                        <li class="nav-item">
                            <a href="https://discord.gg/TTFE8Jfz7G" class="nav-link text-uppercase font-weight-bold">Discord</a>
                        </li>
                        <li class="nav-item">
                            <a href="https://ceasefiretoday.com/" class="nav-link text-uppercase font-weight-bold">Ceasefire üáµüá∏</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <br><br><br>

    <div id="google_translate_element"></div>
    <h1 style="font-family:Arial;color:#000;text-align:center">Schedule</h1>

    <div id="clock" style="font-family:Arial; text-align:center;">Server Date and Time: </div>
    <span id="viewers" style="display:block; text-align:center;">? Viewers</span><br>

    <div class="schedule">
        <!-- The schedule will be loaded here -->
    </div>

    <br>
    <br>
    <br>

    <button onclick="topFunction()" id="tpBtn" title="Go to top">Top</button>
    <script>
        function scrollFunction() {
            mybutton.style.display = document.body.scrollTop > 20 || document.documentElement.scrollTop > 20 ? "block" : "none";
        }

        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }
        var mybutton = document.getElementById("tpBtn");
        window.onscroll = scrollFunction;
    </script>

    <footer class="footer">Made with ‚ù§Ô∏è by DD12<br>Free Palestine üáµüá∏</footer>

    <script>
        async function getTime() {
            try {
                const response = await fetch("https://clock-dd12.b-cdn.net/api/Time/current/zone?timeZone=America/New_York");
                const data = await response.json();
                
                const formattedDate = new Date(data.dateTime).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                const formattedTime = new Date(data.dateTime).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                
                document.getElementById('clock').textContent = `Server Date and Time: ${formattedDate} ${formattedTime} ET`;
            } catch (error) {
                console.error("Error fetching time:", error);
            }
        }
        
        getTime();
        setInterval(getTime, 30000); // Update every 30 seconds

        async function loadSchedule() {
            try {
                const response = await fetch('https://prod.dd12streams.com/schedule-convert.php');
                const data = await response.text();
                document.querySelector('.schedule').innerHTML = data;

                // Update stream statuses
                document.querySelectorAll('.stream-status').forEach(async (element) => {
                    const response = await fetch(`https://dd12streams.com/api/stream-status?name=${element.dataset.name}`);
                    const status = await response.json();
                    element.textContent = status.online ? "Online" : "Offline";
                    element.className = `stream-status ${status.online ? 'online' : 'offline'}`;
                });

                // Convert UNIX timestamp to local time
                document.querySelectorAll('.event').forEach(function(event) {
                    const timestamp = event.dataset.timestamp;
                    const localTime = new Date(timestamp * 1000).toLocaleString();
                    event.insertAdjacentHTML('beforeend', ` Your Date/Time: ${localTime}`);
                });
            } catch (error) {
                console.error("Error loading schedule:", error);
            }
        }

        loadSchedule();
        setInterval(loadSchedule, 20000); // Refresh every 20 seconds
    </script>
</body>
</html>
